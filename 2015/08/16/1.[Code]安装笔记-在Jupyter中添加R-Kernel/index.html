<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head>
    <meta charset="utf-8">
<title>安装笔记: 在Jupyter中添加R Kernel - 太平塔</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">








    <meta name="description" content="Jupyter(即原来的Ipython Notebook Project)基于Web端的实时交互，拥有着极佳的用户体验。同时，Jupyter体系可直接使用其他语言，用户呢能够在同一界面下调用R内核或Python内核(共支持49种)，功能十分强大。在Mac OS下尝试在Jupyter中添加R语言内核，遇到了一些问题，在此记录个人安装过程和诸问题的解决方法。 STEP1 基本软件准备 Python和I">
<meta property="og:type" content="article">
<meta property="og:title" content="安装笔记: 在Jupyter中添加R Kernel">
<meta property="og:url" content="http://envhyf.github.io/2015/08/16/1.[Code]%E5%AE%89%E8%A3%85%E7%AC%94%E8%AE%B0-%E5%9C%A8Jupyter%E4%B8%AD%E6%B7%BB%E5%8A%A0R-Kernel/index.html">
<meta property="og:site_name" content="太平塔">
<meta property="og:description" content="Jupyter(即原来的Ipython Notebook Project)基于Web端的实时交互，拥有着极佳的用户体验。同时，Jupyter体系可直接使用其他语言，用户呢能够在同一界面下调用R内核或Python内核(共支持49种)，功能十分强大。在Mac OS下尝试在Jupyter中添加R语言内核，遇到了一些问题，在此记录个人安装过程和诸问题的解决方法。 STEP1 基本软件准备 Python和I">
<meta property="og:locale">
<meta property="og:image" content="https://i.stack.imgur.com/JfEej.png">
<meta property="article:published_time" content="2015-08-16T19:23:41.000Z">
<meta property="article:modified_time" content="2025-07-23T21:31:33.015Z">
<meta property="article:author" content="Hao Yufang">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="R">
<meta property="article:tag" content="Data processing">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.stack.imgur.com/JfEej.png">





<link rel="icon" href="/bugcatcher.png">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github-dark.min.css">


<link rel="stylesheet" href="/css/style.css">


<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>


    
    
    
    
    
    
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-116955364-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-116955364-1');
</script>


    


<meta name="generator" content="Hexo 6.1.0"></head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/">
                
                    
                    太平塔
                    
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item "
               href="/archives">Archives</a>
            
            <a class="navbar-item "
               href="/categories/Research">Research</a>
            
            <a class="navbar-item "
               href="/categories/Tech">Tech</a>
            
            <a class="navbar-item "
               href="/categories/Life">Life</a>
            
            <a class="navbar-item "
               href="/about">About</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" title="Buscar" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            
            <a class="navbar-item" title="GitHub" target="_blank" rel="noopener" href="https://github.com/envhyf/">
                
                <i class="fab fa-github"></i>
                
            </a>
               
            
        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            安装笔记: 在Jupyter中添加R Kernel
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2015-08-16T19:23:41.000Z" itemprop="datePublished">8月 16 2015</time>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/categories/Tech/">Tech</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            5 分钟 de lectura (Alrededor de 795 palabras)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <html><head></head><body><p><a target="_blank" rel="noopener" href="https://jupyter.org/">Jupyter</a>(即原来的Ipython Notebook Project)基于Web端的实时交互，拥有着极佳的用户体验。同时，Jupyter体系可直接使用其他语言，用户呢能够在同一界面下调用R内核或Python内核(共支持49种)，功能十分强大。<br>在Mac OS下尝试在Jupyter中添加R语言内核，遇到了一些问题，在此记录个人安装过程和诸问题的解决方法。</p>
<h3 id="STEP1-基本软件准备"><a href="#STEP1-基本软件准备" class="headerlink" title="STEP1 基本软件准备"></a>STEP1 基本软件准备</h3><ul>
<li>Python和IPython.作为初学者，我直接安装了Python的科学计算发行版<a target="_blank" rel="noopener" href="https://store.continuum.io/cshop/anaconda/">Anaconda</a>，其包含了Python2.7并内置很多有用的Package(numpy, SciPy, Matplotlib)，Jupyter(Ipython Notebook)以及Spyder(个人感觉类似于R studio的集成开发环境)</li>
<li>R 3.2.1(World-Famous Astronaut)，<a target="_blank" rel="noopener" href="https://cran.r-project.org/">官网</a>下载安装即可。</li>
</ul>
<h3 id="STEP2-有关库的安装"><a href="#STEP2-有关库的安装" class="headerlink" title="STEP2 有关库的安装"></a>STEP2 有关库的安装</h3><p>主要工作是为R语言添加<a target="_blank" rel="noopener" href="https://github.com/IRkernel/IRkernel">IRkernal</a>这一新的Package, 以实现Jupyter对R语言的支持。主要的步骤如下(依照IRkernal的README文档)：</p>
<span id="more"></span>

<h4 id="R-console"><a href="#R-console" class="headerlink" title="R console"></a>R console</h4><pre class="line-numbers language-R" data-language="R"><code class="language-R">## 安装开发工具库
install.packages("devtools")  
## 调用RCurl，可通过github下载有关文件
install.packages('RCurl')
library(devtools)
install_github('armstrtw/rzmq')
install_github("takluyver/IRdisplay")
install_github("takluyver/IRkernel")
IRkernel::installspec()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<p>在安装rzmq时出现问题，导致后续步骤无法进行。<br>参考网络资源，改用brew工具进行安装   </p>
<h4 id="Terminal"><a href="#Terminal" class="headerlink" title="Terminal"></a>Terminal</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ brew install zmq <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>下载成功但未能安装，利用<code>brew doctor</code>进行诊断         </p>
<p>结果显示，显示<br><code>/usr/local/lib/pkgconfig is not writable.</code>     </p>
<p>首先考虑的是MacPort可能存在干扰，将其暂时移除     </p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ sudo mv /opt/local /macports<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>pkgconfig进行重新安装关联</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ sudo chown -R `whoami` /usr/local/lib/pkgconfig
$ brew uninstall pkgconfig  
$ brew install pkgconfig    
$ brew unlink pkg-config &amp;&amp; brew link pkg-config 
$ brew link zmq <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="回到R-Console"><a href="#回到R-Console" class="headerlink" title="回到R Console"></a>回到R Console</h4><pre class="line-numbers language-R" data-language="R"><code class="language-R">install_github("takluyver/IRdisplay")
install_github("takluyver/IRkernel")
IRkernel::installspec()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


<p>最后一个步骤再次出现问题：  </p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">Error in IRkernel::installspec(): 
Jupyter or IPython 3.0 has to be installed but could neither run “jupyter” nor “ipython”, “ipython2” or “ipython3”.
(Note that “ipython2” is just IPython for Python 2, but still may be IPython 3.0)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>安装包的位置出现问题，解决方法如下：</p>
<pre class="line-numbers language-R" data-language="R"><code class="language-R">print(system.file("kernelspec", package = "IRkernel"))<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>


<p>复制该命令的输出结果，我的结果是：<br><code>/Library/Frameworks/R.framework/Versions/3.2/Resources/library/IRkernel/kernelspec</code>)</p>
<h4 id="再回到Terminal-够折腾的"><a href="#再回到Terminal-够折腾的" class="headerlink" title="再回到Terminal(够折腾的)"></a>再回到Terminal(够折腾的)</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ipython kernelspec install --replace --name ir --user /Library/Frameworks/R.framework/Versions/3.2/Resources/library/IRkernel/kernelspec   <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><strong>指令中的路径改为个人的输出结果即可</strong>。</p>
<h3 id="STEP3-检验"><a href="#STEP3-检验" class="headerlink" title="STEP3 检验"></a>STEP3 检验</h3><p>Terminal中键入<code>ipython notebook</code>或<code>jupyter notebook</code>或在Anaconda图形界面下就可以打开Jupyter的网页，如果出现下图的选项，就说明顺利完成了!</p>
<p><a target="_blank" rel="noopener" href="https://i.stack.imgur.com/JfEej.png"><img src="https://i.stack.imgur.com/JfEej.png" alt="Click to enlarge"></a></p>
<h3 id="使用中出现的其他问题"><a href="#使用中出现的其他问题" class="headerlink" title="使用中出现的其他问题"></a>使用中出现的其他问题</h3><p>使用时突然出现，R kernel 无法连接的问题</p>
<p>jupyter-client has to be installed but “jupyter kernelspec –version” exited with code 127.</p>
<p>此种情况，执行下述命令，可修复
	</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">## 换成自己的用户名路径	
sudo ln -s /Users/HYF/anaconda/bin/jupyter /usr/bin/jupyter<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>


<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ol>
<li><a target="_blank" rel="noopener" href="https://github.com/IRkernel/IRkernel">Native R kernel for Jupyter</a>    </li>
<li><a target="_blank" rel="noopener" href="http://ihrke.github.io/jupyter.html">Multi-Language IPython (Jupyter) setup</a></li>
</ol>
</body></html>
    
    </div>
    
    <div class="columns is-variable is-1 is-multiline is-mobile">
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/Python/">#Python</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/R/">#R</a></span>
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/Data-processing/">#Data processing</a></span>
    
    </div>
    
    
    <div class="columns is-mobile is-multiline article-nav">
        <span class="column is-12-mobile is-half-desktop  article-nav-prev">
            
            <a href="/2015/09/08/2.%5BKnowledge%5D%E7%BF%BB%E8%AF%91%E8%AE%A1%E5%88%92-%E5%A4%A7%E6%B0%94%E5%8C%96%E5%AD%A6%E5%9F%BA%E7%A1%80%E6%95%99%E6%9D%90-1/">翻译计划: 大气化学电子教材-第一章PartA</a>
            
        </span>
        <span class="column is-12-mobile is-half-desktop is-hidden-mobile article-nav-next">
            
        </span>
    </div>
    
</article>




<div class="comments">
    <h3 class="title is-4">Comentarios</h3>
    
<script>
    var disqus_config = function () {
        this.page.url = 'http://envhyf.github.io/2015/08/16/1.[Code]%E5%AE%89%E8%A3%85%E7%AC%94%E8%AE%B0-%E5%9C%A8Jupyter%E4%B8%AD%E6%B7%BB%E5%8A%A0R-Kernel/';
        this.page.identifier = '2015/08/16/1.[Code]安装笔记-在Jupyter中添加R-Kernel/';
        
        this.language = 'zh';
        
    };
    (function() {
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'taipingta' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>

<div id="disqus_thread">
    
    <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</div>

    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2025 Hao Yufang&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        target="_blank" rel="noopener" href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            <div class="column is-narrow">
                <div class="columns is-mobile is-multiline is-centered">
                
                    
                <a class="column is-narrow has-text-black" title="GitHub" target="_blank" rel="noopener" href="https://github.com/envhyf/">
                    
                    GitHub
                    
                </a>
                
                </div>
            </div>
            
            
        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("zh-CN");
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
</script>

    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery > p > .gallery-item').unwrap();
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    

    



<script src="/js/script.js"></script>


    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Escribe algo..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Páginas',
                CATEGORIES: 'Categorías',
                TAGS: 'Tags',
                UNTITLED: '(Sin título)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>

<script src="/js/insight.js"></script>

    
</body>
</html>